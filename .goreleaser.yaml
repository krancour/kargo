version: 2
project_name: kargo
builds:
- id: kargo
  main: ./cmd/cli
  goos:
  # - linux
  - darwin
  # - windows
  goarch:
  - amd64
  - arm64
  ignore:
  - goos: windows
    goarch: arm64
  env:
  - CGO_ENABLED=0
  ldflags:
  - -s -w -X main.version={{.Version}} -X main.commit={{.Commit}} -X main.date={{.Date}}
  no_unique_dist_dir: true
  binary: kargo-{{ .Os }}-{{ .Arch }}
archives:
- format: binary
release:
  github:
    owner: krancour
    name: kargo
brews:
- name: kargo
  repository:
    owner: krancour
    name: homebrew-tap
    pull_request:
      enabled: true
